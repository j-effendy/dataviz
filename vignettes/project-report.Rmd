---
title: "Project Report"
author: "Jimmy Effendy"
date: "13/10/2021"
output: bookdown::pdf_document2
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(ggplot2)
library(tidyverse)
library(dataviz)
library(colorspace)
```

# Introduction (300)

According to Cleveland and McGill [-@cleveland1985graphical], data visualizations 
are effective tools for communicating quantitative information and presenting 
scientific data.

The aim of this project is to create a package that can produce figures that
are aesthetically cohesive for a textbook in an automatic and reproducible
manner. As these graphs are generally aimed to be consumed by other people, it
is important for the aesthetics to be engaging. More importantly, the style of 
the graphs needs to make it easier for users to compare and explore data.

# Themes (1500)

## What makes visualisations good? (300)

Azzam, Evergree, and Germuth [-@azzam2013data] stated that data visualization
is defined by three criteria: 

* A process that is based quantitative or qualitative data
* The result of the process is a graph that is representative of the raw data
* The graph is readable and support exploration, examination, and communications
of data.

Without careful considerations in building data visualizations, it has the 
potential to cause confusion resulting in misunderstanding or error in decision
makings [@evergreen2011]. In addition, inefficient visual decoding may result in
users to not detect important aspect of the data [@cleveland1993model]. Inefficient
graphs are not uncommon occurrence, especially with increasing number of options 
in data visualizations. Tufte [-@tufte2001visual] found that prevalent errors and
data misrepresentation were found in mass media. Another study found that 30% of
graphs found in Volume 207 (1980) of *Science* have one or more type of errors
[@cleveland1984graphs].

With the widespread error in data visualisations, guidelines on better graphs
for quantitative and qualitative data were established. Tufte [-@tufte2001visual] 
describes how excellence in statistical graphics can be achieved. One of the 
principles of graphical excellence is that visualisations need to bring viewers' 
attention to the substance of the data as opposed to graphic design, methodology 
or something else. In addition, graphs should prevent distortion of the data, 
and should encourage viewers to compare different parts of data. Another 
suggestion from Tufte is to avoid the usage of chartjunk. Chartjunk is any
decoration that do not provide new information to readers. This can easily cause
viewers to be confused or distracted from the data. Some examples of chartjunk
are moir√© effect, heavy grid lines, noisy background, a fake perspective (i.e. 
3-D charts).

Cleveland and McGill [-@cleveland1984graphical] conducted a study of effective
data visualisation based on graphical perception - humans' ability to visually
decode information encoded on graphs. In the study, people are given elementary
perceptual tasks to decode information from graphs. Then, the tasks are ordered
based on the accuracy of the performance. The order of the elementary tasks from 
most to least accurate is:

* Position along a common scale
* Positions along nonaligned scales
* Length, direction, angle
* Area
* Volume, curvature
* Shading, color saturation

* Principles of good plots

## Roles of themes in data visualisation (300)
* Why themes? Look at ggthemes (reference).
* Focusing on non-data components of the plots
* For general plots - how to optimize the usability of data
* Coherence of a unit by using one theme

## Criteria for good themes (300)

"An effective design presents information in an organized manner, making it easy for the
viewer to understand the roles and the relationships between the elements. For example, all of the contextual information (grid, axis, labels, borders) in
Figure 1 are shades of gray, while the data is brightly colored, which makes the data the
focus of attention." [-@stone2006choosing]

* Minimise non-data ink as much as possible

## Potential themes (300)

### theme_wombat

```{r wombat-scatter, fig.cap="A scatter plot example with 'theme_wombat()'"}
w1 <- ggplot(mtcars, aes(mpg,disp,color=factor(carb))) + 
  geom_point(size=3) + 
  labs(title="Scatter Plot",
       subtitle = "theme_wombat()",
       caption = "Data: mtcars") +
  #scale_y_continuous(expand = c(0.03,0.03)) + 
  #scale_x_continuous(expand = c(0.01,0.01)) +
  theme_wombat()

w1
```

The first figure aesthetic variant is called `theme_wombat()`. Figure 
\@ref(fig:wombat-scatter) shows a scatter plot that has been applied with 
`theme_wombat()`. This theme is built upon ggplot2 basic theme `theme_bw()`. One 
of the main goals of this style is to reduce clutter of plots. This is achieved 
by:

* Removing minor grid lines in the x and y axis
* Maximising white space to improve legibility
* Removing extra space around the plot
* Move legend position to the bottom of the plot
* Having a bigger plot title, subtitle, and axis title

### theme_seagull

```{r seagull-scatter, fig.cap="A scatter plot example with 'theme_seagull()'"}
s1 <- ggplot(mtcars, aes(mpg,disp,color=factor(carb))) + 
  geom_point(size=3) + 
  labs(title="Scatter Plot",
       subtitle = "theme_seagull()",
       caption = "Data: mtcars") +
  #scale_y_continuous(expand = c(0.03,0.03)) + 
  #scale_x_continuous(expand = c(0.01,0.01)) +
  theme_seagull()

s1
```

Another proposed figure style is `theme_seagull()`. An example of plot applied
with this style is shown in figure \@ref(fig:seagull-scatter). This theme is built
based on ggplot2 `theme_minmal()`. In comparison to `theme_wombat()`, this style
reduce clutter within a plot even further. The following adjustments are made
to the original `theme_minimal()`:

* Adding a major grid line on the x axis
* Removing minor grid lines on the x and y axis
* Maximising white space to improve legibility
* Removing extra space around the plot
* Move legend position to the bottom of the plot
* Having a bigger plot title, subtitle, and axis title

## Comparing themes (300)

### Individual Plots

* Compare with each other and basic theme
* Advantage and disadvantage

```{r wombat-comparison, fig.cap="Comparison between theme_wombat (left) and theme_bw (right).", fig.height=14, fig.width=11}
w2 <- ggplot(mtcars, aes(factor(carb),fill=factor(carb))) + 
  geom_bar() + 
  scale_y_continuous(expand = c(0,0)) + 
  scale_x_discrete(expand = c(0,0)) +
  labs(title="Bar Plot",
       subtitle = "theme_wombat()",
       caption = "Data: mtcars") +
  theme_wombat()

w3 <- ggplot(economics_long, aes(date, value01, colour = variable)) +
  geom_line() +
   scale_y_continuous(expand = c(0,0)) + 
   scale_x_date(expand = c(0,0)) +
  labs(title = "Line Plot",
       subtitle = "theme_wombat()",
       caption = "Data: economics_long") +
  theme_wombat()

bw1 <- ggplot(mtcars, aes(mpg,disp,color=factor(carb))) + 
  geom_point(size=3) + 
  labs(title="Scatter Plot",
       subtitle = "theme_bw()",
       caption = "Data: mtcars") +
  theme_bw()

bw2 <- ggplot(mtcars, aes(factor(carb),fill=factor(carb))) + 
  geom_bar() + 
  labs(title="Bar Plot",
       subtitle = "theme_bw()",
       caption = "Data: mtcars") +
  theme_bw()

bw3 <- ggplot(economics_long, aes(date, value01, colour = variable)) +
  geom_line() +
  labs(title = "Line Plot",
       subtitle = "theme_bw()",
       caption = "Data: economics_long") +
  theme_bw()

(w1 + bw1) / (w2 + bw2) / (w3 + bw3)
```

Side by side comparison of scatter plots, bar charts, and line charts between
`theme_wombat` and `theme_bw()` can be found in figure \@ref(fig:wombat-comparison).
Figure \@ref(fig:wombat-facet) shows the comparison of faceted plot between
these two themes.

```{r seagull-comparison, fig.cap="Comparison between theme_seagull (left) and theme_minimal (right).", fig.height=14, fig.width=11}
s2 <- ggplot(mtcars, aes(factor(carb),fill=factor(carb))) + 
  geom_bar() + 
  scale_y_continuous(expand = c(0,0)) + 
  scale_x_discrete(expand = c(0,0)) +
  labs(title="Bar Plot",
       subtitle = "theme_seagull()",
       caption = "Data: mtcars") +
  theme_seagull()

s3 <- ggplot(economics_long, aes(date, value01, colour = variable)) +
  geom_line() +
  scale_y_continuous(expand = c(0,0)) + 
  scale_x_date(expand = c(0,0)) +
  labs(title = "Line Plot",
       subtitle = "theme_seagull()",
       caption = "Data: economics_long") +
  theme_seagull()

m1 <- ggplot(mtcars, aes(mpg,disp,color=factor(carb))) + 
  geom_point(size=3) + 
  labs(title="Scatter Plot",
       subtitle = "theme_minimal()",
       caption = "Data: mtcars") +
  theme_minimal()

m2 <- ggplot(mtcars, aes(factor(carb),fill=factor(carb))) + 
  geom_bar() + 
  labs(title="Bar Plot",
       subtitle = "theme_minimal()",
       caption = "Data: mtcars") +
  theme_minimal()

m3 <- ggplot(economics_long, aes(date, value01, colour = variable)) +
  geom_line() +
  labs(title = "Line Plot",
       subtitle = "theme_minimal()",
       caption = "Data: economics_long") +
  theme_minimal()

(s1 + m1) / (s2 + m2) / (s3 + m3)
```

Side by side comparison of scatter plots, bar charts, and line charts between
`theme_seagull()` and `theme_minimal()` can be found in figure 
\@ref(fig:seagull-comparison). Figure \@ref(fig:wombat-facet) shows the 
comparison of faceted plot between these two themes.

### Faceted Plots

```{r wombat-facet, fig.height=14, fig.width=11, fig.cap="Comparison between theme_wombat (top) and theme_bw (bottom) for faceted plot."}
w4 <- ggplot(data = mpg,aes(cty, hwy,color=drv))+geom_point(size=3) + 
  facet_wrap(~ class,scales="free")+
  labs(title="Plot With Facets",
       subtitle = "theme_wombat()",
       caption = "Data: mpg") + 
  theme_wombat()

bw4 <- ggplot(data = mpg,aes(cty, hwy,color=drv))+geom_point(size=3) + 
  facet_wrap(~ class,scales="free")+
  labs(title="Plot With Facets",
       subtitle = "theme_bw()",
       caption = "Data: mpg") + 
  theme_bw()

w4 / bw4
```

```{r seagull-facet, fig.height=14, fig.width=11, fig.cap="Comparison between theme_seagull (top) and theme_minimal (bottom) for faceted plot."}
s4 <- ggplot(data = mpg,aes(cty, hwy,color=drv))+geom_point(size=3) + 
  facet_wrap(~ class,scales="free")+
  labs(title="Plot With Facets",
       subtitle = "theme_seagull()",
       caption = "Data: mpg") + 
  theme_seagull()

m4 <- ggplot(data = mpg,aes(cty, hwy,color=drv))+geom_point(size=3) + 
  facet_wrap(~ class,scales="free")+
  labs(title="Plot With Facets",
       subtitle = "theme_minimal()",
       caption = "Data: mpg") + 
  theme_minimal()

s4 / m4
```


# Colour Palettes (1500)

## Why color is important and what it is use for (300)

* It can be used for representing different variable, etc.

One of the most important elements in data visualization. When used well, 
it can enhance the quality of information being presented.  It is essential
to select a color palette as a poor set of colors may hinder readers' ability
to understand the purpose of visualizations. Unfortunately, it is often the
case that color choice is sub-optimal as there is little guidance on how to
select effective colour palette for graphs [@zeileis2009escaping].

Stone [-@stone2006choosing] mentioned that differentiating one element from one
another is the most important use of color in data visualization.

## Color Model

* What potential color models are there?
* Benefits and disadvantage of each color model
* Discuss why do we choose HCL

According to Zeileis, Hornik, and Murrell [@zeileis2009escaping], Red-Green-Blue
(RGB) color model is typically used by software packages. However, this color
model was developed to generate color on computer screen as opposed to developed
in corresponds to human perception of color. Zeileis, Hornik, and Murrell further
stated that it is practically impossible for a human to control the perceptual
properties of a color within this color model as there is no single dimension
that relates to hue or brightness of a color

One color model that was developed based on human perception is 
Hue-Chroma-Luminance  (HCL) color model. Hue corresponds to dominant wavelength, 
chroma to colourfulness, luminance to brightness [@ihaka2003colour].

## Color scale types (300)

### Sequential

* Can talk about how Brewer did these color palettes

### Diverging

### Qualitative


* for qualitative, we need more variation in the hue line. Need to avoid
* implicit ordering
* make chroma and luminance to have patterns (but not the same with the others)

## Color palette of choice

### Sequential (200)

* Hue is increasing in a very smooth pattern. More prefer to use this for
* sequential for ordering

```{r seal}
seal_palette <- colorspace::sequential_hcl(7,
                                              h = c(0, -100),
                                              c = c(80,40),
                                              l = c(40, 75),
                                              power = c(1,1))

# color spectrum plot
specplot(seal_palette) 
# colorblind filter
pal.safe(seal_palette, main = "seal_palette")
```


```{r snake}
snake_palette <- colorspace::sequential_hcl(6,
                                              h = c(250, 90),
                                              c = c(40, 55),
                                              l = c(33,98),
                                              power = c(0.5,1),
                                              rev = TRUE)

# color spectrum plot
specplot(snake_palette)
# colorblind filter
pal.safe(snake_palette, main = "snake_palette")
```

* How did we choose them?
* Come from another package?
* How do we assess them?

* Talk about the HCL plot
* Talk about the accessibility
* Talk about how it should match the data

### Diverging (200)

```{r dingo}
dingo_palette <- colorspace::diverge_hcl(7,
                                           h = c(260, 0),
                                           c = 80,
                                           l = c(30, 90),
                                           power = 1.5)

# color spectrum plot
specplot(dingo_palette)
# colorblind filter
pal.safe(dingo_palette, main = "dingo_palette")
```

```{r dolphin}
dolphin_palette <- colorspace::diverging_hcl(n = 7,
                                             h = c(265, 45),
                                             c = 80,
                                             l = c(70, 95),
                                             power = c(0.5, 2),
                                             rev = TRUE)

# color spectrum plot
specplot(dolphin_palette)
# colorblind filter
pal.safe(dolphin_palette, main = "dolphin_palette")
```

### Qualitative (200)

```{r other-qualitative}
brewer_qualitative <- c("#a6cee3", "#1f78b4", "#b2df8a", "#33a02c")
tol_qualitative <- c("#4477AA", "#EE6677", "#228833", "#CCBB44", "#66CCEE", "#AA3377", "#BBBBBB")
```

```{r quokka}
quokka_palette <- c("#8C01E6", "#93B1EB", "#AB313D", "#D6CA24")

# color spectrum plot
specplot(quokka_palette)
# colorblind filter
pal.safe(quokka_palette, main = "quokka_palette")
```

```{r quoll}
quoll_palette <- c('#8D5698', '#EFD36F', '#247A3E', '#17B0A8')

# color spectrum plot
specplot(quoll_palette)
# colorblind filter
pal.safe(quoll_palette, main = "quoll_palette")
```

# R Package (1500)

## Testing

# Conclusion (300)
